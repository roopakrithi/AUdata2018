---
title: "Polygons"
author: "Roopa Krithivasan"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r setup}

library(sp)
library(rgdal)
library(maps)


fl <- system.file("extdata/", package = "AUdata2018") 

au <- readOGR(dsn = paste0(fl, "All_mergeIDs2.shp")
              , layer = "All_mergeIDs2")

names(au)

# plot all AUs

layout(matrix(c(1,2,1,3), 2, 2, byrow = T), widths = c(1.4,1))
par(mar = c(0, 0, 0, 0), oma = c(0, 0, 0, 0))
for(i in 1:3){
  reg <- au[au$region == i, ]
  plot(reg)
  box(lty = 1)
  map.scale(ratio=F, relwidth=0.3, cex = .4)
}



```
Not perfect, but reasonable start. Don't spend too much time making this perfect. 


To add:
Rivers, major roads, settlements, and village boundaries (do this tomorrow)
maps by:

  - threat level relative within village (high and low)
  - current use category (a few need to be modified)
   - number of users
   - live dep
  - travel time
  - visibility
  - more area cultivated?
  - more intensive use?
  - threat level max
  - threat level by species (all together, use rgb alpha) * later
  - any collective monitoring?
  
  
```{r}

# livelihood dependence
layout(matrix(c(1,2,1,3), 2, 2, byrow = T), widths = c(1.4,1))
par(mar = c(0, 0, 0, 0), oma = c(0, 0, 0, 0))
for(i in 1:3){
  reg <- au[au$region == i, ]
  plot(reg)
  plot(subset(reg, liv_dep == 1), col = "blue", add = T)
  box(lty = 1)
}



cols <- sapply(1:5, function(x){
  rgb(1, 0, 0, x*.2)
})
  

layout(matrix(c(1,2,1,3), 2, 2, byrow = T), widths = c(1.4,1))
par(mar = c(0, 0, 0, 0), oma = c(0, 0, 0, 0))

for(i in 1:3){
  reg <- au[au$region == i, ]
      plot(reg)
      for(j in 1:5){
      plot(subset(reg, max_threat == j), col = cols[j], add = T)
      }
  box(lty = 1)
}
## work on colors


```
  
  
